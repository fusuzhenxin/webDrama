{"ast":null,"code":"import { ref, onMounted, computed } from 'vue';\nimport request from \"@/utils/request\";\nimport { useRoute } from 'vue-router';\nconst episodesPerPage = 25;\nexport default {\n  __name: 'VideoDetail',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const Collect = ref(0);\n    const Likes = ref(0);\n    const videoData = ref(null);\n    const videoPlayer = ref(null);\n    const numberOfEpisodes = ref(0);\n    const Descriptions = ref(null);\n    const currentPage = ref(1);\n    const route = useRoute();\n    const videoId = route.params.id;\n    const videoName = route.params.name;\n    console.log(\"idididid\", videoId);\n    const loadVideoData = async () => {\n      try {\n        const res = await request.get('/file/Inception', {\n          params: {\n            name: videoName\n          }\n        });\n        // const res = await request.get(`/file/${videoId}`);\n\n        videoData.value = res.data.data;\n        console.log(\"[[[\", videoData.value);\n      } catch (error) {\n        console.error('Error loading video data:', error);\n      }\n    };\n    const loadDescription = async () => {\n      try {\n        const res = await request.get('/details/finAll', {\n          params: {\n            name: videoName\n          }\n        });\n        Descriptions.value = res.data.data;\n        console.log(\"===Descriptions.valueDescriptions.value==\", Descriptions.value);\n      } catch (error) {\n        console.error('Error loading number of episodes:', error);\n      }\n    };\n    const loadNumberOfEpisodes = async () => {\n      try {\n        const res = await request.get('/videos/diversity', {\n          params: {\n            name: videoName\n          }\n        });\n        numberOfEpisodes.value = res.data.data;\n      } catch (error) {\n        console.error('Error loading number of episodes:', error);\n      }\n    };\n    onMounted(() => {\n      loadVideoData();\n      loadNumberOfEpisodes();\n      loadDescription();\n    });\n    const displayedEpisodes = computed(() => {\n      const startIndex = (currentPage.value - 1) * episodesPerPage;\n      const endIndex = Math.min(startIndex + episodesPerPage, numberOfEpisodes.value);\n      return Array.from({\n        length: endIndex - startIndex\n      }, (_, index) => startIndex + index + 1);\n    });\n    const totalPages = computed(() => Math.ceil(numberOfEpisodes.value / episodesPerPage));\n    const loadEpisode = async episodeNumber => {\n      console.log(\"?????????\", episodeNumber);\n      const startIndex = (currentPage.value - 1) * episodesPerPage;\n      const actualEpisodeNumber = startIndex + episodeNumber;\n      try {\n        const res = await request.get(`/videos/${videoName}/episode/${actualEpisodeNumber}`);\n        const url = res.data.data;\n        if (videoPlayer.value) {\n          videoPlayer.value.src = url;\n          videoPlayer.value.load();\n          videoPlayer.value.play();\n        }\n      } catch (error) {\n        console.error('Error loading episode:', error);\n      }\n    };\n    const setCurrentPage = page => {\n      currentPage.value = page;\n    };\n    const __returned__ = {\n      Collect,\n      Likes,\n      videoData,\n      videoPlayer,\n      numberOfEpisodes,\n      Descriptions,\n      episodesPerPage,\n      currentPage,\n      route,\n      videoId,\n      videoName,\n      loadVideoData,\n      loadDescription,\n      loadNumberOfEpisodes,\n      displayedEpisodes,\n      totalPages,\n      loadEpisode,\n      setCurrentPage,\n      ref,\n      onMounted,\n      computed,\n      get request() {\n        return request;\n      },\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","computed","request","useRoute","episodesPerPage","Collect","Likes","videoData","videoPlayer","numberOfEpisodes","Descriptions","currentPage","route","videoId","params","id","videoName","name","console","log","loadVideoData","res","get","value","data","error","loadDescription","loadNumberOfEpisodes","displayedEpisodes","startIndex","endIndex","Math","min","Array","from","length","_","index","totalPages","ceil","loadEpisode","episodeNumber","actualEpisodeNumber","url","src","load","play","setCurrentPage","page"],"sources":["F:/video/vue_video/src/views/VideoDetail.vue"],"sourcesContent":["<template>\r\n\r\n  <div class=\"container\"  v-if=\"videoData\">\r\n    <div class=\"video-wrapper\">\r\n      <div class=\"video-container\">\r\n        <video ref=\"videoPlayer\" controls class=\"custom-video\" >\r\n          <source :src=\"videoData[0].url\" type=\"video/mp4\">\r\n          Your browser does not support the video tag.\r\n        </video>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"pagination-container\">\r\n\r\n      <h1 style=\"color: white\">{{ videoData[0].name }}</h1>\r\n      <p style=\"color: whitesmoke\">主演：{{Descriptions && Descriptions.actors}}</p>\r\n      <div>\r\n        <button>{{ Descriptions && Descriptions.classify }}</button>\r\n        <button style=\"margin-left: 10px\">民国</button>\r\n      </div>\r\n      <div>\r\n        <p style=\"color: darkgray\">{{Descriptions && Descriptions.description}}</p>\r\n      </div>\r\n\r\n      <div class=\"like-favorite-container\">\r\n        <div class=\"like-container\">\r\n          <button class=\"like-button\"@click=\"Likes()\">点赞</button>\r\n          <span class=\"like-count\">{{Descriptions && Descriptions.quantity}}</span>\r\n        </div>\r\n        <div class=\"favorite-container\">\r\n          <button class=\"favorite-button\"@click=\"Collect()\">收藏</button>\r\n          <span class=\"favorite-count\">{{Descriptions && Descriptions.collect}}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <br>\r\n\r\n      <hr>\r\n      <div style=\"display: flex; justify-content: space-between;\">\r\n        <div>\r\n          <h2 style=\"color: white\">选集</h2>\r\n        </div>\r\n        <div>\r\n          <h4 style=\"color: #8a8b8d;margin-right: 240px;margin-top: 30px\">共{{numberOfEpisodes}}集</h4>\r\n        </div>\r\n      </div>\r\n      <div class=\"button-bottom-half\">  <!-- 上半部分 -->\r\n        <div class=\"button-inner-container\">\r\n          <button v-for=\"(episode, index) in displayedEpisodes\" :key=\"index\" @click=\"loadEpisode(index+1)\" class=\"episode-button\">\r\n            {{ episode }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"pagination-top-half\"> <!-- 下半部分 -->\r\n        <!-- 这里放其他内容 -->\r\n        <div class=\"pagination\">\r\n          <button v-for=\"page in totalPages\" :key=\"page\" @click=\"setCurrentPage(page)\" :class=\"{ active: page === currentPage }\">{{ page }}</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n  <div v-else>\r\n    Loading...\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport request from \"@/utils/request\";\r\nimport { useRoute } from 'vue-router';\r\n\r\nconst Collect=ref(0);\r\nconst Likes=ref(0);\r\nconst videoData = ref(null);\r\nconst videoPlayer = ref(null);\r\nconst numberOfEpisodes = ref(0);\r\nconst  Descriptions= ref(null)\r\nconst episodesPerPage = 25;\r\nconst currentPage = ref(1);\r\nconst route = useRoute();\r\nconst videoId = route.params.id;\r\nconst videoName = route.params.name;\r\nconsole.log(\"idididid\",videoId)\r\nconst loadVideoData = async () => {\r\n  try {\r\n    const res = await request.get('/file/Inception',{params: {name: videoName} });\r\n    // const res = await request.get(`/file/${videoId}`);\r\n\r\n    videoData.value = res.data.data;\r\n    console.log(\"[[[\",videoData.value)\r\n  } catch (error) {\r\n    console.error('Error loading video data:', error);\r\n  }\r\n};\r\nconst loadDescription =async () => {\r\n  try {\r\n    const res=await request.get('/details/finAll', {params: {name: videoName} })\r\n    Descriptions.value=res.data.data\r\n    console.log(\"===Descriptions.valueDescriptions.value==\",Descriptions.value)\r\n  }catch (error){\r\n    console.error('Error loading number of episodes:', error);\r\n  }\r\n}\r\nconst loadNumberOfEpisodes = async () => {\r\n  try {\r\n    const res = await request.get('/videos/diversity', { params: { name: videoName } });\r\n    numberOfEpisodes.value = res.data.data;\r\n  } catch (error) {\r\n    console.error('Error loading number of episodes:', error);\r\n  }\r\n};\r\n\r\nonMounted(() => {\r\n  loadVideoData();\r\n  loadNumberOfEpisodes();\r\n  loadDescription();\r\n});\r\n\r\nconst displayedEpisodes = computed(() => {\r\n  const startIndex = (currentPage.value - 1) * episodesPerPage;\r\n  const endIndex = Math.min(startIndex + episodesPerPage, numberOfEpisodes.value);\r\n  return Array.from({ length: endIndex - startIndex }, (_, index) => startIndex + index + 1);\r\n});\r\n\r\nconst totalPages = computed(() => Math.ceil(numberOfEpisodes.value / episodesPerPage));\r\n\r\n\r\nconst loadEpisode = async (episodeNumber) => {\r\n  console.log(\"?????????\", episodeNumber);\r\n  const startIndex = (currentPage.value - 1) * episodesPerPage;\r\n  const actualEpisodeNumber = startIndex + episodeNumber;\r\n  try {\r\n    const res = await request.get(`/videos/${videoName}/episode/${actualEpisodeNumber}`);\r\n    const url = res.data.data;\r\n    if (videoPlayer.value) {\r\n      videoPlayer.value.src = url;\r\n      videoPlayer.value.load();\r\n      videoPlayer.value.play();\r\n    }\r\n  } catch (error) {\r\n    console.error('Error loading episode:', error);\r\n  }\r\n};\r\n\r\nconst setCurrentPage = (page) => {\r\n  currentPage.value = page;\r\n};\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  border: 2px solid #ccc;\r\n  padding: 10px;\r\n  background-color: black;\r\n  display: flex;\r\n}\r\n\r\n.video-wrapper {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border: 1px solid black; /* 添加按钮边框样式 */\r\n}\r\n\r\n.video-container {\r\n  position: relative;\r\n  flex: 1;\r\n}\r\n\r\n.custom-video {\r\n  width: 1000px;\r\n  height: 800px;\r\n  background-color: white;\r\n  background-color: rgba(255, 255, 255, 0.6); /* 白色背景，透明度为 0.5 */\r\n}\r\n\r\n\r\n.button-inner-container {\r\n  display: grid;\r\n  grid-template-columns: repeat(5, 1fr);\r\n  gap: 10px;\r\n  margin-bottom: 10px;\r\n  width: calc(100% - 20px); /* 设置按钮宽度为容器宽度的 20%，减去间距 */\r\n}\r\n.episode-button {\r\n\r\n  height: 50px;\r\n  background-color: #333333;\r\n  //border: 2px solid white; /* 添加按钮边框样式 */\r\n  color: white;\r\n  text-align: center;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  padding: 20px; /* 增加按钮内边距 */\r\n  line-height: 1; /* 让文本垂直居中 */\r\n  margin-left: 5px;\r\n  border-radius: 2px;\r\n}\r\n.button-inner-container button {\r\n  width: 100%;\r\n  height: 50px;\r\n  background-color: #333333;\r\n  border: none;\r\n  color: white;\r\n  text-align: center;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n}\r\n\r\n.pagination-container {\r\n  //border: 2px solid #ccc; /* 添加大边框样式 */\r\n  padding: 20px; /* 添加内边距 */\r\n  margin-bottom: 10px; /* 调整与按钮边框的间距 */\r\n}\r\n\r\n.pagination {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.pagination button {\r\n  margin-right: 5px;\r\n  background-color: #333;\r\n  color: white;\r\n  border: none;\r\n  padding: 5px 10px;\r\n  cursor: pointer;\r\n}\r\n\r\n.pagination button.active {\r\n  background-color: #555;\r\n}\r\n.pagination-top-half {\r\n  flex: 1;\r\n}\r\n\r\n.button-bottom-half {\r\n  flex: 1;\r\n}\r\n\r\n.like-favorite-container {\r\n  border: 1px solid darkgray;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 10px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.like-container, .favorite-container {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.like-button, .favorite-button {\r\n  padding: 5px 10px;\r\n  background-color: transparent;\r\n  border: none;\r\n  color: darkgray;\r\n  cursor: pointer;\r\n}\r\n\r\n.like-count, .favorite-count {\r\n  margin-left: 5px;\r\n  color: white;\r\n}\r\n\r\n.like-button:hover, .favorite-button:hover {\r\n  background-color: darkgray;\r\n  color: white;\r\n}\r\n\r\n</style>\r\n"],"mappings":"AAqEA,SAASA,GAAG,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,KAAK;AAC9C,OAAOC,OAAO,MAAM,iBAAiB;AACrC,SAASC,QAAQ,QAAQ,YAAY;AAQrC,MAAMC,eAAe,GAAG,EAAE;;;;;;;IAN1B,MAAMC,OAAO,GAACN,GAAG,CAAC,CAAC,CAAC;IACpB,MAAMO,KAAK,GAACP,GAAG,CAAC,CAAC,CAAC;IAClB,MAAMQ,SAAS,GAAGR,GAAG,CAAC,IAAI,CAAC;IAC3B,MAAMS,WAAW,GAAGT,GAAG,CAAC,IAAI,CAAC;IAC7B,MAAMU,gBAAgB,GAAGV,GAAG,CAAC,CAAC,CAAC;IAC/B,MAAOW,YAAY,GAAEX,GAAG,CAAC,IAAI,CAAC;IAE9B,MAAMY,WAAW,GAAGZ,GAAG,CAAC,CAAC,CAAC;IAC1B,MAAMa,KAAK,GAAGT,QAAQ,CAAC,CAAC;IACxB,MAAMU,OAAO,GAAGD,KAAK,CAACE,MAAM,CAACC,EAAE;IAC/B,MAAMC,SAAS,GAAGJ,KAAK,CAACE,MAAM,CAACG,IAAI;IACnCC,OAAO,CAACC,GAAG,CAAC,UAAU,EAACN,OAAO,CAAC;IAC/B,MAAMO,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMnB,OAAO,CAACoB,GAAG,CAAC,iBAAiB,EAAC;UAACR,MAAM,EAAE;YAACG,IAAI,EAAED;UAAS;QAAE,CAAC,CAAC;QAC7E;;QAEAT,SAAS,CAACgB,KAAK,GAAGF,GAAG,CAACG,IAAI,CAACA,IAAI;QAC/BN,OAAO,CAACC,GAAG,CAAC,KAAK,EAACZ,SAAS,CAACgB,KAAK,CAAC;MACpC,CAAC,CAAC,OAAOE,KAAK,EAAE;QACdP,OAAO,CAACO,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACnD;IACF,CAAC;IACD,MAAMC,eAAe,GAAE,MAAAA,CAAA,KAAY;MACjC,IAAI;QACF,MAAML,GAAG,GAAC,MAAMnB,OAAO,CAACoB,GAAG,CAAC,iBAAiB,EAAE;UAACR,MAAM,EAAE;YAACG,IAAI,EAAED;UAAS;QAAE,CAAC,CAAC;QAC5EN,YAAY,CAACa,KAAK,GAACF,GAAG,CAACG,IAAI,CAACA,IAAI;QAChCN,OAAO,CAACC,GAAG,CAAC,2CAA2C,EAACT,YAAY,CAACa,KAAK,CAAC;MAC7E,CAAC,QAAOE,KAAK,EAAC;QACZP,OAAO,CAACO,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;MAC3D;IACF,CAAC;IACD,MAAME,oBAAoB,GAAG,MAAAA,CAAA,KAAY;MACvC,IAAI;QACF,MAAMN,GAAG,GAAG,MAAMnB,OAAO,CAACoB,GAAG,CAAC,mBAAmB,EAAE;UAAER,MAAM,EAAE;YAAEG,IAAI,EAAED;UAAU;QAAE,CAAC,CAAC;QACnFP,gBAAgB,CAACc,KAAK,GAAGF,GAAG,CAACG,IAAI,CAACA,IAAI;MACxC,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdP,OAAO,CAACO,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;MAC3D;IACF,CAAC;IAEDzB,SAAS,CAAC,MAAM;MACdoB,aAAa,CAAC,CAAC;MACfO,oBAAoB,CAAC,CAAC;MACtBD,eAAe,CAAC,CAAC;IACnB,CAAC,CAAC;IAEF,MAAME,iBAAiB,GAAG3B,QAAQ,CAAC,MAAM;MACvC,MAAM4B,UAAU,GAAG,CAAClB,WAAW,CAACY,KAAK,GAAG,CAAC,IAAInB,eAAe;MAC5D,MAAM0B,QAAQ,GAAGC,IAAI,CAACC,GAAG,CAACH,UAAU,GAAGzB,eAAe,EAAEK,gBAAgB,CAACc,KAAK,CAAC;MAC/E,OAAOU,KAAK,CAACC,IAAI,CAAC;QAAEC,MAAM,EAAEL,QAAQ,GAAGD;MAAW,CAAC,EAAE,CAACO,CAAC,EAAEC,KAAK,KAAKR,UAAU,GAAGQ,KAAK,GAAG,CAAC,CAAC;IAC5F,CAAC,CAAC;IAEF,MAAMC,UAAU,GAAGrC,QAAQ,CAAC,MAAM8B,IAAI,CAACQ,IAAI,CAAC9B,gBAAgB,CAACc,KAAK,GAAGnB,eAAe,CAAC,CAAC;IAGtF,MAAMoC,WAAW,GAAG,MAAOC,aAAa,IAAK;MAC3CvB,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEsB,aAAa,CAAC;MACvC,MAAMZ,UAAU,GAAG,CAAClB,WAAW,CAACY,KAAK,GAAG,CAAC,IAAInB,eAAe;MAC5D,MAAMsC,mBAAmB,GAAGb,UAAU,GAAGY,aAAa;MACtD,IAAI;QACF,MAAMpB,GAAG,GAAG,MAAMnB,OAAO,CAACoB,GAAG,CAAE,WAAUN,SAAU,YAAW0B,mBAAoB,EAAC,CAAC;QACpF,MAAMC,GAAG,GAAGtB,GAAG,CAACG,IAAI,CAACA,IAAI;QACzB,IAAIhB,WAAW,CAACe,KAAK,EAAE;UACrBf,WAAW,CAACe,KAAK,CAACqB,GAAG,GAAGD,GAAG;UAC3BnC,WAAW,CAACe,KAAK,CAACsB,IAAI,CAAC,CAAC;UACxBrC,WAAW,CAACe,KAAK,CAACuB,IAAI,CAAC,CAAC;QAC1B;MACF,CAAC,CAAC,OAAOrB,KAAK,EAAE;QACdP,OAAO,CAACO,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAChD;IACF,CAAC;IAED,MAAMsB,cAAc,GAAIC,IAAI,IAAK;MAC/BrC,WAAW,CAACY,KAAK,GAAGyB,IAAI;IAC1B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}