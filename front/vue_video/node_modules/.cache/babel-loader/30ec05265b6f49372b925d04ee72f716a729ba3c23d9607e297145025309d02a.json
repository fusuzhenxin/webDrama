{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport request from \"@/utils/request\";\nimport { useRoute } from 'vue-router';\n\n// 使用 ref 创建响应式数据\n\nexport default {\n  __name: 'VideoDetail',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const videoData = ref(null);\n    const currentEpisodeIndex = ref(0);\n\n    // 获取路由器实例\n    const route = useRoute();\n\n    // 从路由参数中获取视频 ID\n    const videoId = route.params.id;\n\n    // 定义方法来加载视频数据\n    const loadVideoData = async () => {\n      try {\n        // 发起请求获取视频数据\n        const res = await request.get(`/file/${videoId}`);\n        // 如果请求成功，更新视频数据\n        videoData.value = res.data.data;\n        console.log(\"_----\", videoData.value);\n      } catch (error) {\n        // 捕获并处理请求错误\n        console.error('Error loading video data:', error);\n      }\n    };\n\n    // 在组件挂载时加载视频数据\n    onMounted(() => {\n      loadVideoData();\n    });\n\n    // 播放指定集数的视频\n    const playEpisode = index => {\n      // 更新当前播放的集数索引\n      currentEpisodeIndex.value = index;\n    };\n\n    // 计算当前播放的集数的视频 URL\n    const currentEpisodeUrl = computed(() => {\n      if (videoData.value && videoData.value.episodes && videoData.value.episodes[currentEpisodeIndex.value]) {\n        return videoData.value.episodes[currentEpisodeIndex.value].url;\n      }\n      return '';\n    });\n    const __returned__ = {\n      videoData,\n      currentEpisodeIndex,\n      route,\n      videoId,\n      loadVideoData,\n      playEpisode,\n      currentEpisodeUrl,\n      ref,\n      onMounted,\n      get request() {\n        return request;\n      },\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","request","useRoute","videoData","currentEpisodeIndex","route","videoId","params","id","loadVideoData","res","get","value","data","console","log","error","playEpisode","index","currentEpisodeUrl","computed","episodes","url"],"sources":["F:/video/vue_video/src/views/VideoDetail.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- 在加载数据期间显示加载状态 -->\r\n    <div v-if=\"!videoData\">Loading...</div>\r\n    <!-- 显示视频数据 -->\r\n    <div v-else>\r\n      <h1>{{ videoData.name }}</h1>\r\n\r\n      <!-- 显示视频播放器 -->\r\n      <video ref=\"videoPlayer\" controls>\r\n        <source :src=\"currentEpisodeUrl\" type=\"video/mp4\">\r\n        Your browser does not support the video tag.\r\n      </video>\r\n\r\n      <!-- 显示不同集数 -->\r\n      <button v-for=\"(episode, index) in videoData.episodes\" :key=\"index\" @click=\"playEpisode(index)\">\r\n        Episode {{ index + 1 }}\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport request from \"@/utils/request\";\r\nimport { useRoute } from 'vue-router';\r\n\r\n// 使用 ref 创建响应式数据\r\nconst videoData = ref(null);\r\nconst currentEpisodeIndex = ref(0);\r\n\r\n// 获取路由器实例\r\nconst route = useRoute();\r\n\r\n// 从路由参数中获取视频 ID\r\nconst videoId = route.params.id;\r\n\r\n// 定义方法来加载视频数据\r\nconst loadVideoData = async () => {\r\n  try {\r\n    // 发起请求获取视频数据\r\n    const res = await request.get(`/file/${videoId}`);\r\n    // 如果请求成功，更新视频数据\r\n    videoData.value = res.data.data;\r\n    console.log(\"_----\", videoData.value)\r\n  } catch (error) {\r\n    // 捕获并处理请求错误\r\n    console.error('Error loading video data:', error);\r\n  }\r\n};\r\n\r\n// 在组件挂载时加载视频数据\r\nonMounted(() => {\r\n  loadVideoData();\r\n});\r\n\r\n// 播放指定集数的视频\r\nconst playEpisode = (index) => {\r\n  // 更新当前播放的集数索引\r\n  currentEpisodeIndex.value = index;\r\n};\r\n\r\n// 计算当前播放的集数的视频 URL\r\nconst currentEpisodeUrl = computed(() => {\r\n  if (videoData.value && videoData.value.episodes && videoData.value.episodes[currentEpisodeIndex.value]) {\r\n    return videoData.value.episodes[currentEpisodeIndex.value].url;\r\n  }\r\n  return '';\r\n});\r\n</script>\r\n"],"mappings":"AAuBA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,OAAO,MAAM,iBAAiB;AACrC,SAASC,QAAQ,QAAQ,YAAY;;AAErC;;;;;;;;IACA,MAAMC,SAAS,GAAGJ,GAAG,CAAC,IAAI,CAAC;IAC3B,MAAMK,mBAAmB,GAAGL,GAAG,CAAC,CAAC,CAAC;;IAElC;IACA,MAAMM,KAAK,GAAGH,QAAQ,CAAC,CAAC;;IAExB;IACA,MAAMI,OAAO,GAAGD,KAAK,CAACE,MAAM,CAACC,EAAE;;IAE/B;IACA,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACF;QACA,MAAMC,GAAG,GAAG,MAAMT,OAAO,CAACU,GAAG,CAAE,SAAQL,OAAQ,EAAC,CAAC;QACjD;QACAH,SAAS,CAACS,KAAK,GAAGF,GAAG,CAACG,IAAI,CAACA,IAAI;QAC/BC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEZ,SAAS,CAACS,KAAK,CAAC;MACvC,CAAC,CAAC,OAAOI,KAAK,EAAE;QACd;QACAF,OAAO,CAACE,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACnD;IACF,CAAC;;IAED;IACAhB,SAAS,CAAC,MAAM;MACdS,aAAa,CAAC,CAAC;IACjB,CAAC,CAAC;;IAEF;IACA,MAAMQ,WAAW,GAAIC,KAAK,IAAK;MAC7B;MACAd,mBAAmB,CAACQ,KAAK,GAAGM,KAAK;IACnC,CAAC;;IAED;IACA,MAAMC,iBAAiB,GAAGC,QAAQ,CAAC,MAAM;MACvC,IAAIjB,SAAS,CAACS,KAAK,IAAIT,SAAS,CAACS,KAAK,CAACS,QAAQ,IAAIlB,SAAS,CAACS,KAAK,CAACS,QAAQ,CAACjB,mBAAmB,CAACQ,KAAK,CAAC,EAAE;QACtG,OAAOT,SAAS,CAACS,KAAK,CAACS,QAAQ,CAACjB,mBAAmB,CAACQ,KAAK,CAAC,CAACU,GAAG;MAChE;MACA,OAAO,EAAE;IACX,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}