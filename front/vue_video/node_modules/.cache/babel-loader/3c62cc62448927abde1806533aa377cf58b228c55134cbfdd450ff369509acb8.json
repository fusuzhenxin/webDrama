{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Footer from \"@/views/Footer.vue\";\nimport { computed, ref } from 'vue';\nimport { useRouter } from 'vue-router';\nexport default {\n  name: 'App',\n  components: {\n    Footer\n  },\n  setup() {\n    const router = useRouter();\n    const user = ref(JSON.parse(localStorage.getItem('user')));\n    const showDropdown = ref(false);\n    const isLoggedIn = computed(() => !!user.value);\n    const username = computed(() => user.value ? user.value.username : '');\n    const toggleDropdown = () => {\n      showDropdown.value = !showDropdown.value;\n    };\n    const logout = () => {\n      // 清除用户信息\n      user.value = null;\n      localStorage.removeItem('user');\n      // 清空购物车数据\n      // 这里可以调用清空购物车数据的函数，具体实现需要根据您的实际情况进行\n      // 导航到首页\n      if (router.currentRoute.value.path !== '/home') {\n        router.push('/');\n      }\n    };\n    return {\n      user,\n      isLoggedIn,\n      username,\n      showDropdown,\n      toggleDropdown,\n      logout\n    };\n  }\n};","map":{"version":3,"names":["Footer","computed","ref","useRouter","name","components","setup","router","user","JSON","parse","localStorage","getItem","showDropdown","isLoggedIn","value","username","toggleDropdown","logout","removeItem","currentRoute","path","push"],"sources":["F:\\video\\vue_video\\src\\views\\Layout.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- 导航栏 -->\r\n    <nav class=\"top-nav\">\r\n      <ul class=\"top-nav-list\">\r\n        <li v-if=\"!isLoggedIn\"><router-link to=\"/login\">登录</router-link></li>\r\n        <li v-if=\"!isLoggedIn\"><router-link to=\"/register\">注册</router-link></li>\r\n        <li v-if=\"isLoggedIn\" @click=\"toggleDropdown\" class=\"user-dropdown\">\r\n          <img :src=\"require('../assets/img_7.png')\" class=\"avatar\">\r\n          <span style=\"color: white;\" class=\"username\">{{ username }}</span>\r\n          <!-- 下拉箭头 -->\r\n          <span class=\"dropdown-arrow\">&#9660;</span>\r\n          <!-- 下拉菜单 -->\r\n          <ul v-if=\"showDropdown\" class=\"dropdown-menu\">\r\n            <li><a @click=\"logout\">退出</a></li>\r\n          </ul>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n\r\n    <!-- 导航栏 -->\r\n    <nav>\r\n      <ul class=\"nav-list\">\r\n        <img :src=\"require('../assets/img_1.png')\" alt=\"\" style=\"width: 60px; position: relative; top: 3px; left: -150px\">\r\n        <!-- 首页导航项 -->\r\n        <li><router-link to=\"/\">首页</router-link></li>\r\n        <!-- 购物车导航项 -->\r\n        <li><router-link to=\"/ShoppingCart\">购物车</router-link></li>\r\n        <!-- 订单导航项 -->\r\n        <li><router-link to=\"/orders\">我的订单</router-link></li>\r\n        <!-- 我的账户导航项 -->\r\n        <li><router-link to=\"/account\">我的账户</router-link></li>\r\n        <!-- 我的收藏夹导航项 -->\r\n        <li><router-link to=\"/account\">收藏夹</router-link></li>\r\n        <!-- 我的收货地址导航项 -->\r\n        <li><router-link to=\"/account\">收货地址</router-link></li>\r\n\r\n        <!-- 搜索框和按钮 -->\r\n        <li class=\"search-box\">\r\n          <div class=\"search-container\">\r\n            <input type=\"text\" placeholder=\"搜索\">\r\n            <button><img :src=\"require('../assets/1.png')\"></button>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n      <router-view/>\r\n    </nav>\r\n\r\n    <Footer/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Footer from \"@/views/Footer.vue\";\r\nimport { computed, ref } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: {\r\n    Footer,\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const user = ref(JSON.parse(localStorage.getItem('user')));\r\n    const showDropdown = ref(false);\r\n\r\n    const isLoggedIn = computed(() => !!user.value);\r\n    const username = computed(() => user.value ? user.value.username : '');\r\n\r\n    const toggleDropdown = () => {\r\n      showDropdown.value = !showDropdown.value;\r\n    };\r\n\r\n    const logout = () => {\r\n      // 清除用户信息\r\n      user.value = null;\r\n      localStorage.removeItem('user');\r\n      // 清空购物车数据\r\n      // 这里可以调用清空购物车数据的函数，具体实现需要根据您的实际情况进行\r\n      // 导航到首页\r\n      if (router.currentRoute.value.path !== '/home') {\r\n        router.push('/');\r\n      }\r\n    };\r\n\r\n    return {\r\n      user,\r\n      isLoggedIn,\r\n      username,\r\n      showDropdown,\r\n      toggleDropdown,\r\n      logout\r\n    };\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n/* 样式部分省略，保持不变 */\r\n</style>\r\n"],"mappings":";AAqDA,OAAOA,MAAK,MAAO,oBAAoB;AACvC,SAASC,QAAQ,EAAEC,GAAE,QAAS,KAAK;AACnC,SAASC,SAAQ,QAAS,YAAY;AAEtC,eAAe;EACbC,IAAI,EAAE,KAAK;EACXC,UAAU,EAAE;IACVL;EACF,CAAC;EACDM,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAK,GAAIJ,SAAS,CAAC,CAAC;IAC1B,MAAMK,IAAG,GAAIN,GAAG,CAACO,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;IAC1D,MAAMC,YAAW,GAAIX,GAAG,CAAC,KAAK,CAAC;IAE/B,MAAMY,UAAS,GAAIb,QAAQ,CAAC,MAAM,CAAC,CAACO,IAAI,CAACO,KAAK,CAAC;IAC/C,MAAMC,QAAO,GAAIf,QAAQ,CAAC,MAAMO,IAAI,CAACO,KAAI,GAAIP,IAAI,CAACO,KAAK,CAACC,QAAO,GAAI,EAAE,CAAC;IAEtE,MAAMC,cAAa,GAAIA,CAAA,KAAM;MAC3BJ,YAAY,CAACE,KAAI,GAAI,CAACF,YAAY,CAACE,KAAK;IAC1C,CAAC;IAED,MAAMG,MAAK,GAAIA,CAAA,KAAM;MACnB;MACAV,IAAI,CAACO,KAAI,GAAI,IAAI;MACjBJ,YAAY,CAACQ,UAAU,CAAC,MAAM,CAAC;MAC/B;MACA;MACA;MACA,IAAIZ,MAAM,CAACa,YAAY,CAACL,KAAK,CAACM,IAAG,KAAM,OAAO,EAAE;QAC9Cd,MAAM,CAACe,IAAI,CAAC,GAAG,CAAC;MAClB;IACF,CAAC;IAED,OAAO;MACLd,IAAI;MACJM,UAAU;MACVE,QAAQ;MACRH,YAAY;MACZI,cAAc;MACdC;IACF,CAAC;EACH;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}