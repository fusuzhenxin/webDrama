{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport request from \"@/utils/request\";\nimport { useRoute } from 'vue-router';\n\n// 使用 ref 创建响应式数据\n\nexport default {\n  __name: 'VideoDetail',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const videoData = ref(null);\n    const videoPlayer = ref(null);\n    const diversitys = ref(null);\n    // 获取路由器实例\n    const route = useRoute();\n\n    // 从路由参数中获取视频 ID\n    const videoId = route.params.id;\n    const videoName = route.params.name;\n\n    // 定义方法来加载视频数据\n    const loadVideoData = async () => {\n      try {\n        // 发起请求获取视频数据\n        const res = await request.get(`/file/${videoId}`);\n        // 如果请求成功，更新视频数据\n        videoData.value = res.data.data;\n        console.log(\"_----\", videoData.value);\n      } catch (error) {\n        // 捕获并处理请求错误\n        console.error('Error loading video data:', error);\n      }\n    };\n    const loadDiversity = async () => {\n      try {\n        const res = await request.get('/videos/diversity', {\n          params: {\n            name: videoName\n          }\n        });\n        const diversitys = res.data.data;\n        console.log(\"diversity=========\");\n      } catch (error) {\n        console.error('Error loading visdeo data', error);\n      }\n    };\n    loadDiversity();\n    // 在组件挂载时加载视频数据\n    onMounted(() => {\n      loadVideoData();\n    });\n\n    // 播放指定集数的视频\n    const playEpisode = episode => {\n      // 更新视频播放器的源\n      if (videoPlayer.value) {\n        videoPlayer.value.src = episode.url;\n        videoPlayer.value.load();\n        videoPlayer.value.play();\n      }\n    };\n    const __returned__ = {\n      videoData,\n      videoPlayer,\n      diversitys,\n      route,\n      videoId,\n      videoName,\n      loadVideoData,\n      loadDiversity,\n      playEpisode,\n      ref,\n      onMounted,\n      get request() {\n        return request;\n      },\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","request","useRoute","videoData","videoPlayer","diversitys","route","videoId","params","id","videoName","name","loadVideoData","res","get","value","data","console","log","error","loadDiversity","playEpisode","episode","src","url","load","play"],"sources":["F:/video/vue_video/src/views/VideoDetail.vue"],"sourcesContent":["<template>\r\n  <!-- 在加载数据期间显示加载状态 -->\r\n  <div v-if=\"!videoData\">Loading...</div>\r\n  <!-- 显示视频数据 -->\r\n  <div v-else>\r\n    <h1>{{ videoData.name }}</h1>\r\n    <!-- 显示视频播放器 -->\r\n    <video ref=\"videoPlayer\" controls>\r\n      <source :src=\"videoData.url\" type=\"video/mp4\">\r\n      Your browser does not support the video tag.\r\n    </video>\r\n    <!-- 显示不同集数 -->\r\n    <button v-for=\"(episode, index) in videoData.diversity\" :key=\"index\" @click=\"playEpisode(episode)\">\r\n      Episode {{ index + 1 }}\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport request from \"@/utils/request\";\r\nimport { useRoute } from 'vue-router';\r\n\r\n// 使用 ref 创建响应式数据\r\nconst videoData = ref(null);\r\nconst videoPlayer = ref(null);\r\nconst diversitys =ref(null);\r\n// 获取路由器实例\r\nconst route = useRoute();\r\n\r\n// 从路由参数中获取视频 ID\r\nconst videoId = route.params.id;\r\nconst videoName=route.params.name\r\n\r\n// 定义方法来加载视频数据\r\nconst loadVideoData = async () => {\r\n  try {\r\n    // 发起请求获取视频数据\r\n    const res = await request.get(`/file/${videoId}`);\r\n    // 如果请求成功，更新视频数据\r\n    videoData.value = res.data.data;\r\n    console.log(\"_----\", videoData.value)\r\n  } catch (error) {\r\n    // 捕获并处理请求错误\r\n    console.error('Error loading video data:', error);\r\n  }\r\n};\r\n\r\nconst  loadDiversity =async ()=>{\r\n  try {\r\n    const res =await request.get('/videos/diversity',{ params: { name: videoName } });\r\n    const diversitys= res.data.data\r\n    console.log(\"diversity=========\",)\r\n  }catch (error){\r\n    console.error('Error loading visdeo data',error)\r\n  }\r\n}\r\n\r\nloadDiversity()\r\n// 在组件挂载时加载视频数据\r\nonMounted(() => {\r\n  loadVideoData();\r\n});\r\n\r\n// 播放指定集数的视频\r\nconst playEpisode = (episode) => {\r\n  // 更新视频播放器的源\r\n  if (videoPlayer.value) {\r\n    videoPlayer.value.src = episode.url;\r\n    videoPlayer.value.load();\r\n    videoPlayer.value.play();\r\n  }\r\n};\r\n</script>\r\n"],"mappings":"AAmBA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAOC,OAAO,MAAM,iBAAiB;AACrC,SAASC,QAAQ,QAAQ,YAAY;;AAErC;;;;;;;;IACA,MAAMC,SAAS,GAAGJ,GAAG,CAAC,IAAI,CAAC;IAC3B,MAAMK,WAAW,GAAGL,GAAG,CAAC,IAAI,CAAC;IAC7B,MAAMM,UAAU,GAAEN,GAAG,CAAC,IAAI,CAAC;IAC3B;IACA,MAAMO,KAAK,GAAGJ,QAAQ,CAAC,CAAC;;IAExB;IACA,MAAMK,OAAO,GAAGD,KAAK,CAACE,MAAM,CAACC,EAAE;IAC/B,MAAMC,SAAS,GAACJ,KAAK,CAACE,MAAM,CAACG,IAAI;;IAEjC;IACA,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACF;QACA,MAAMC,GAAG,GAAG,MAAMZ,OAAO,CAACa,GAAG,CAAE,SAAQP,OAAQ,EAAC,CAAC;QACjD;QACAJ,SAAS,CAACY,KAAK,GAAGF,GAAG,CAACG,IAAI,CAACA,IAAI;QAC/BC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEf,SAAS,CAACY,KAAK,CAAC;MACvC,CAAC,CAAC,OAAOI,KAAK,EAAE;QACd;QACAF,OAAO,CAACE,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACnD;IACF,CAAC;IAED,MAAOC,aAAa,GAAE,MAAAA,CAAA,KAAU;MAC9B,IAAI;QACF,MAAMP,GAAG,GAAE,MAAMZ,OAAO,CAACa,GAAG,CAAC,mBAAmB,EAAC;UAAEN,MAAM,EAAE;YAAEG,IAAI,EAAED;UAAU;QAAE,CAAC,CAAC;QACjF,MAAML,UAAU,GAAEQ,GAAG,CAACG,IAAI,CAACA,IAAI;QAC/BC,OAAO,CAACC,GAAG,CAAC,oBAAqB,CAAC;MACpC,CAAC,QAAOC,KAAK,EAAC;QACZF,OAAO,CAACE,KAAK,CAAC,2BAA2B,EAACA,KAAK,CAAC;MAClD;IACF,CAAC;IAEDC,aAAa,CAAC,CAAC;IACf;IACApB,SAAS,CAAC,MAAM;MACdY,aAAa,CAAC,CAAC;IACjB,CAAC,CAAC;;IAEF;IACA,MAAMS,WAAW,GAAIC,OAAO,IAAK;MAC/B;MACA,IAAIlB,WAAW,CAACW,KAAK,EAAE;QACrBX,WAAW,CAACW,KAAK,CAACQ,GAAG,GAAGD,OAAO,CAACE,GAAG;QACnCpB,WAAW,CAACW,KAAK,CAACU,IAAI,CAAC,CAAC;QACxBrB,WAAW,CAACW,KAAK,CAACW,IAAI,CAAC,CAAC;MAC1B;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}