{"ast":null,"code":"import { ref } from 'vue';\nimport { ElMessage } from \"element-plus\";\nimport request from \"@/utils/request\";\nexport default {\n  __name: 'addDetails',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const form = ref({\n      username: '',\n      phone: ''\n    });\n    const ruleForm = ref(null);\n    const checkPhone = (rule, value, callback) => {\n      if (!/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(value)) {\n        callback(new Error('请输入合法的手机号'));\n      } else {\n        callback();\n      }\n    };\n    const rules = {\n      username: [{\n        required: true,\n        message: '请输入用户名',\n        trigger: 'blur'\n      }, {\n        min: 3,\n        max: 10,\n        message: '长度在3-10个字符',\n        trigger: 'blur'\n      }],\n      phone: [{\n        validator: checkPhone,\n        trigger: 'blur'\n      }]\n    };\n    const save = () => {\n      if (ruleForm.value) {\n        ruleForm.value.validate(valid => {\n          if (valid) {\n            request.post('/admin/save', form.value).then(res => {\n              if (res.data.code === '200') {\n                ElMessage.success('新增成功');\n                ruleForm.value.resetFields();\n              } else {\n                ElMessage.error(res.msg);\n              }\n            });\n          }\n        });\n      } else {\n        console.error('ruleForm is null');\n      }\n    };\n    const handleImgUploadSuccess = val => {\n      form.value.cover = val;\n    };\n    const __returned__ = {\n      form,\n      ruleForm,\n      checkPhone,\n      rules,\n      save,\n      handleImgUploadSuccess,\n      ref,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get request() {\n        return request;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","ElMessage","request","form","username","phone","ruleForm","checkPhone","rule","value","callback","test","Error","rules","required","message","trigger","min","max","validator","save","validate","valid","post","then","res","data","code","success","resetFields","error","msg","console","handleImgUploadSuccess","val","cover"],"sources":["F:/video/vue2/src/views/details/addDetails.vue"],"sourcesContent":["<template>\r\n  <div style=\"width: 80%\">\r\n    <div style=\"margin-bottom: 30px\">新增管理员</div>\r\n    <el-form :inline=\"true\" :model=\"form\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\">\r\n      <el-form-item label=\"剧名\" prop=\"username\">\r\n        <el-input v-model=\"form.name\" placeholder=\"请输入剧名\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"分类\" prop=\"classify\">\r\n        <el-input v-model=\"form.classify\" placeholder=\"请输入分类\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"描述\" prop=\"description\">\r\n        <el-input v-model=\"form.description\" placeholder=\"请输入描述\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"主演\" prop=\"actors\">\r\n        <el-input v-model=\"form.actors\" placeholder=\"请输入主演\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"cover\" label=\"食品图片\">\r\n        <el-upload action=\"http://localhost:9090/file/upload\" ref=\"cover\" :on-success=\"handleImgUploadSuccess\">\r\n          <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n        </el-upload>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <div style=\"text-align: center; margin-top: 30px\">\r\n      <el-button type=\"primary\" @click=\"save\" size=\"medium\">提交</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport { ElMessage } from \"element-plus\";\r\nimport request from \"@/utils/request\";\r\n\r\nconst form = ref({\r\n  username: '',\r\n  phone: '',\r\n});\r\n\r\nconst ruleForm = ref(null);\r\n\r\nconst checkPhone = (rule, value, callback) => {\r\n  if (!/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(value)) {\r\n    callback(new Error('请输入合法的手机号'));\r\n  } else {\r\n    callback();\r\n  }\r\n};\r\n\r\nconst rules = {\r\n  username: [\r\n    { required: true, message: '请输入用户名', trigger: 'blur'},\r\n    { min: 3, max: 10, message: '长度在3-10个字符', trigger: 'blur'}\r\n  ],\r\n  phone: [\r\n    { validator: checkPhone, trigger: 'blur' }\r\n  ]\r\n};\r\n\r\nconst save = () => {\r\n  if (ruleForm.value) {\r\n    ruleForm.value.validate((valid) => {\r\n      if (valid) {\r\n        request.post('/admin/save', form.value).then(res => {\r\n          if (res.data.code === '200') {\r\n            ElMessage.success('新增成功');\r\n            ruleForm.value.resetFields();\r\n          } else {\r\n            ElMessage.error(res.msg);\r\n          }\r\n        });\r\n      }\r\n    });\r\n  } else {\r\n    console.error('ruleForm is null');\r\n  }\r\n};\r\n\r\nconst  handleImgUploadSuccess =(val) =>{\r\n  form.value.cover=val\r\n}\r\n</script>\r\n"],"mappings":"AA8BA,SAASA,GAAG,QAAQ,KAAK;AACzB,SAASC,SAAS,QAAQ,cAAc;AACxC,OAAOC,OAAO,MAAM,iBAAiB;;;;;;;IAErC,MAAMC,IAAI,GAAGH,GAAG,CAAC;MACfI,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE;IACT,CAAC,CAAC;IAEF,MAAMC,QAAQ,GAAGN,GAAG,CAAC,IAAI,CAAC;IAE1B,MAAMO,UAAU,GAAGA,CAACC,IAAI,EAAEC,KAAK,EAAEC,QAAQ,KAAK;MAC5C,IAAI,CAAC,8BAA8B,CAACC,IAAI,CAACF,KAAK,CAAC,EAAE;QAC/CC,QAAQ,CAAC,IAAIE,KAAK,CAAC,WAAW,CAAC,CAAC;MAClC,CAAC,MAAM;QACLF,QAAQ,CAAC,CAAC;MACZ;IACF,CAAC;IAED,MAAMG,KAAK,GAAG;MACZT,QAAQ,EAAE,CACR;QAAEU,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,QAAQ;QAAEC,OAAO,EAAE;MAAM,CAAC,EACrD;QAAEC,GAAG,EAAE,CAAC;QAAEC,GAAG,EAAE,EAAE;QAAEH,OAAO,EAAE,YAAY;QAAEC,OAAO,EAAE;MAAM,CAAC,CAC3D;MACDX,KAAK,EAAE,CACL;QAAEc,SAAS,EAAEZ,UAAU;QAAES,OAAO,EAAE;MAAO,CAAC;IAE9C,CAAC;IAED,MAAMI,IAAI,GAAGA,CAAA,KAAM;MACjB,IAAId,QAAQ,CAACG,KAAK,EAAE;QAClBH,QAAQ,CAACG,KAAK,CAACY,QAAQ,CAAEC,KAAK,IAAK;UACjC,IAAIA,KAAK,EAAE;YACTpB,OAAO,CAACqB,IAAI,CAAC,aAAa,EAAEpB,IAAI,CAACM,KAAK,CAAC,CAACe,IAAI,CAACC,GAAG,IAAI;cAClD,IAAIA,GAAG,CAACC,IAAI,CAACC,IAAI,KAAK,KAAK,EAAE;gBAC3B1B,SAAS,CAAC2B,OAAO,CAAC,MAAM,CAAC;gBACzBtB,QAAQ,CAACG,KAAK,CAACoB,WAAW,CAAC,CAAC;cAC9B,CAAC,MAAM;gBACL5B,SAAS,CAAC6B,KAAK,CAACL,GAAG,CAACM,GAAG,CAAC;cAC1B;YACF,CAAC,CAAC;UACJ;QACF,CAAC,CAAC;MACJ,CAAC,MAAM;QACLC,OAAO,CAACF,KAAK,CAAC,kBAAkB,CAAC;MACnC;IACF,CAAC;IAED,MAAOG,sBAAsB,GAAGC,GAAG,IAAI;MACrC/B,IAAI,CAACM,KAAK,CAAC0B,KAAK,GAACD,GAAG;IACtB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}