{"ast":null,"code":"import { ref, useForm } from 'vue';\nimport request from \"@/utils/request\";\nimport { ElMessage } from \"element-plus\";\nexport default {\n  __name: 'addAdmin',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const {\n      form,\n      rules\n    } = useForm();\n    const ruleForm = ref(null);\n    const checkPhone = (rule, value, callback) => {\n      if (!/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(value)) {\n        callback(new Error('请输入合法的手机号'));\n      } else {\n        callback();\n      }\n    };\n    rules.value = {\n      username: [{\n        required: true,\n        message: '请输入用户名',\n        trigger: 'blur'\n      }, {\n        min: 3,\n        max: 10,\n        message: '长度在3-10个字符',\n        trigger: 'blur'\n      }],\n      phone: [{\n        validator: checkPhone,\n        trigger: 'blur'\n      }]\n    };\n    const save = () => {\n      ruleForm.value.validate(valid => {\n        if (valid) {\n          request.post('/admin/save', form.value).then(res => {\n            if (res.code === '200') {\n              ElMessage.success('新增成功');\n              ruleForm.value.resetFields();\n            } else {\n              ElMessage.error(res.msg);\n            }\n          });\n        }\n      });\n    };\n    const __returned__ = {\n      form,\n      rules,\n      ruleForm,\n      checkPhone,\n      save,\n      ref,\n      useForm,\n      get request() {\n        return request;\n      },\n      get ElMessage() {\n        return ElMessage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useForm","request","ElMessage","form","rules","ruleForm","checkPhone","rule","value","callback","test","Error","username","required","message","trigger","min","max","phone","validator","save","validate","valid","post","then","res","code","success","resetFields","error","msg"],"sources":["F:/video/vue2/src/views/admin/addAdmin.vue"],"sourcesContent":["<template>\r\n  <div style=\"width: 80%\">\r\n    <div style=\"margin-bottom: 30px\">新增管理员</div>\r\n    <el-form :inline=\"true\" :model=\"form\" :rules=\"rules\" :ref=\"ruleForm\" label-width=\"100px\">\r\n      <el-form-item label=\"用户名\" prop=\"username\">\r\n        <el-input v-model=\"form.username\" placeholder=\"请输入姓名\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"联系方式\" prop=\"phone\">\r\n        <el-input v-model=\"form.phone\" placeholder=\"请输入联系方式\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"邮箱\" prop=\"email\">\r\n        <el-input v-model=\"form.email\" placeholder=\"请输入邮箱\"></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <div style=\"text-align: center; margin-top: 30px\">\r\n      <el-button type=\"primary\" @click=\"save\" size=\"medium\">提交</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, useForm } from 'vue';\r\nimport request from \"@/utils/request\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nconst { form, rules } = useForm();\r\nconst ruleForm = ref(null);\r\n\r\nconst checkPhone = (rule, value, callback) => {\r\n  if (!/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(value)) {\r\n    callback(new Error('请输入合法的手机号'));\r\n  } else {\r\n    callback();\r\n  }\r\n};\r\n\r\nrules.value = {\r\n  username: [\r\n    { required: true, message: '请输入用户名', trigger: 'blur'},\r\n    { min: 3, max: 10, message: '长度在3-10个字符', trigger: 'blur'}\r\n  ],\r\n  phone: [\r\n    { validator: checkPhone, trigger: 'blur' }\r\n  ]\r\n};\r\n\r\nconst save = () => {\r\n  ruleForm.value.validate((valid) => {\r\n    if (valid) {\r\n      request.post('/admin/save', form.value).then(res => {\r\n        if (res.code === '200') {\r\n          ElMessage.success('新增成功');\r\n          ruleForm.value.resetFields();\r\n        } else {\r\n          ElMessage.error(res.msg);\r\n        }\r\n      });\r\n    }\r\n  });\r\n};\r\n</script>\r\n"],"mappings":"AAsBA,SAASA,GAAG,EAAEC,OAAO,QAAQ,KAAK;AAClC,OAAOC,OAAO,MAAM,iBAAiB;AACrC,SAASC,SAAS,QAAQ,cAAc;;;;;;;IAExC,MAAM;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAGJ,OAAO,CAAC,CAAC;IACjC,MAAMK,QAAQ,GAAGN,GAAG,CAAC,IAAI,CAAC;IAE1B,MAAMO,UAAU,GAAGA,CAACC,IAAI,EAAEC,KAAK,EAAEC,QAAQ,KAAK;MAC5C,IAAI,CAAC,8BAA8B,CAACC,IAAI,CAACF,KAAK,CAAC,EAAE;QAC/CC,QAAQ,CAAC,IAAIE,KAAK,CAAC,WAAW,CAAC,CAAC;MAClC,CAAC,MAAM;QACLF,QAAQ,CAAC,CAAC;MACZ;IACF,CAAC;IAEDL,KAAK,CAACI,KAAK,GAAG;MACZI,QAAQ,EAAE,CACR;QAAEC,QAAQ,EAAE,IAAI;QAAEC,OAAO,EAAE,QAAQ;QAAEC,OAAO,EAAE;MAAM,CAAC,EACrD;QAAEC,GAAG,EAAE,CAAC;QAAEC,GAAG,EAAE,EAAE;QAAEH,OAAO,EAAE,YAAY;QAAEC,OAAO,EAAE;MAAM,CAAC,CAC3D;MACDG,KAAK,EAAE,CACL;QAAEC,SAAS,EAAEb,UAAU;QAAES,OAAO,EAAE;MAAO,CAAC;IAE9C,CAAC;IAED,MAAMK,IAAI,GAAGA,CAAA,KAAM;MACjBf,QAAQ,CAACG,KAAK,CAACa,QAAQ,CAAEC,KAAK,IAAK;QACjC,IAAIA,KAAK,EAAE;UACTrB,OAAO,CAACsB,IAAI,CAAC,aAAa,EAAEpB,IAAI,CAACK,KAAK,CAAC,CAACgB,IAAI,CAACC,GAAG,IAAI;YAClD,IAAIA,GAAG,CAACC,IAAI,KAAK,KAAK,EAAE;cACtBxB,SAAS,CAACyB,OAAO,CAAC,MAAM,CAAC;cACzBtB,QAAQ,CAACG,KAAK,CAACoB,WAAW,CAAC,CAAC;YAC9B,CAAC,MAAM;cACL1B,SAAS,CAAC2B,KAAK,CAACJ,GAAG,CAACK,GAAG,CAAC;YAC1B;UACF,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;IACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}