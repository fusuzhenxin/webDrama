{"ast":null,"code":"import { createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-1a4a7262\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\",\n  style: {\n    \"min-height\": \"100%\",\n    \"padding-bottom\": \"100px\"\n  }\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  style: {\n    \"color\": \"black\"\n  }\n}, \"我思念的她\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", {\n  style: {\n    \"color\": \"black\"\n  }\n}, \"主演：李承\", -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_header = _resolveComponent(\"el-header\");\n  const _component_el_aside = _resolveComponent(\"el-aside\");\n  const _component_el_text = _resolveComponent(\"el-text\");\n  const _component_el_main = _resolveComponent(\"el-main\");\n  const _component_el_footer = _resolveComponent(\"el-footer\");\n  const _component_el_container = _resolveComponent(\"el-container\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_container, null, {\n    default: _withCtx(() => [_createVNode(_component_el_header, null, {\n      default: _withCtx(() => [_createVNode($setup[\"Navigation\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_container, null, {\n      default: _withCtx(() => [_createVNode(_component_el_aside, {\n        width: \"1000px\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"Aside\")]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_container, null, {\n        default: _withCtx(() => [_createVNode(_component_el_main, {\n          width: \"382px\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_text, null, {\n            default: _withCtx(() => [_hoisted_2]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_text, null, {\n            default: _withCtx(() => [_hoisted_3]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_footer, null, {\n          default: _withCtx(() => [_createTextVNode(\"Footer\")]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","style","_createElementVNode","_createElementBlock","_hoisted_1","_createVNode","_component_el_container","default","_withCtx","_component_el_header","$setup","_","_component_el_aside","width","_createTextVNode","_component_el_main","_component_el_text","_hoisted_2","_hoisted_3","_component_el_footer"],"sources":["F:\\video\\vue\\src\\views\\VideoDetail.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\" style=\"min-height: 100%; padding-bottom: 100px;\">\r\n      <el-container>\r\n        <el-header>\r\n           <navigation/>\r\n        </el-header>\r\n        <el-container>\r\n          <el-aside width=\"1000px\">Aside</el-aside>\r\n          <el-container>\r\n            <el-main width=\"382px\">\r\n                <el-text><h1 style=\"color: black\">我思念的她</h1></el-text>\r\n                <el-text>  <p style=\"color: black\">主演：李承</p></el-text>\r\n            </el-main>\r\n            <el-footer>Footer</el-footer>\r\n          </el-container>\r\n        </el-container>\r\n      </el-container>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\nimport Navigation from \"@/views/navigation.vue\";\r\nimport { ref, onMounted, computed } from 'vue';\r\nimport request from \"@/utils/request\";\r\nimport { useRoute } from 'vue-router';\r\n// import Navigation from \"@/views/navigation.vue\";\r\n\r\nconst isLiked = ref(false);\r\nconst isCollect=ref(false);\r\nconst videoData = ref(null);\r\nconst videoPlayer = ref(null);\r\nconst numberOfEpisodes = ref(0);\r\nconst  Descriptions= ref(null)\r\nconst episodesPerPage = 25;\r\nconst currentPage = ref(1);\r\nconst route = useRoute();\r\nconst videoId = route.params.id;\r\nconst videoName = route.params.name;\r\nconsole.log(\"idididid\",videoId)\r\nconst showDropdown = ref(false);\r\nconst username = ref(\"User\"); // 你可以根据你的需要设置默认用户名\r\nconst searchQuery = ref('')\r\nimport { useRouter } from \"vue-router\";\r\nconst  router = useRouter();\r\nconst toggleDropdown = () => {\r\n  showDropdown.value = !showDropdown.value; // 切换下拉菜单的显示状态\r\n};\r\n\r\nconst isLoggedIn = () => {\r\n  return !!username.value; // 根据用户是否存在判断用户是否已登录\r\n};\r\nconst search = () => {\r\n  console.log('Search method called');\r\n  // 如果搜索框有内容，执行路由跳转\r\n  if (searchQuery.value.trim() !== '') {\r\n    router.push({name: 'search',params:{searchQuery: searchQuery.value}}); // 这里替换为你要跳转的页面路径\r\n  }\r\n};\r\nconst logout = () => {\r\n  // 这里添加注销登录的逻辑，比如清除用户信息等\r\n  console.log('注销登录');\r\n};\r\n//第一集url和短剧的信息\r\nconst loadVideoData = async () => {\r\n  try {\r\n    const res = await request.get('/file/Inception',{params: {name: videoName} });\r\n    // const res = await request.get(`/file/${videoId}`);\r\n\r\n    videoData.value = res.data.data;\r\n    console.log(\"[[[\",videoData.value)\r\n  } catch (error) {\r\n    console.error('Error loading video data:', error);\r\n  }\r\n};\r\n\r\n//每个剧的详情\r\nconst loadDescription =async () => {\r\n  try {\r\n    const res=await request.get('/details/finAll', {params: {name: videoName} })\r\n    Descriptions.value=res.data.data\r\n    console.log(\"res.data.data----------\",res.data.data)\r\n  }catch (error){\r\n    console.error('Error loading number of episodes:', error);\r\n  }\r\n}\r\n\r\n//获取这个剧有多少集\r\nconst loadNumberOfEpisodes = async () => {\r\n  try {\r\n    const res = await request.get('/videos/diversity', { params: { name: videoName } });\r\n    numberOfEpisodes.value = res.data.data;\r\n  } catch (error) {\r\n    console.error('Error loading number of episodes:', error);\r\n  }\r\n};\r\n\r\n//点赞数量\r\nconst Likes = async () => {\r\n  if (!isLiked.value) {\r\n    // 如果当前未点赞，则进行点赞操作\r\n    // 发送点赞请求...\r\n    // 更新点赞数量...\r\n    const res = await request.get('/details/likes',{params: { name: videoName}});\r\n    Descriptions.value.quantity=res.data.data\r\n    console.log(\"-------\", res.data.data)\r\n    isLiked.value = true;\r\n  } else {\r\n    // 如果当前已经点赞，则取消点赞操作\r\n    // 发送取消点赞请求...\r\n    // 更新点赞数量...\r\n    const res = await request.get('/details/likesDelete',{params: { name: videoName}});\r\n    Descriptions.value.quantity=res.data.data\r\n    console.log(\"-------\", res.data.data)\r\n    isLiked.value = false;\r\n  }\r\n\r\n};\r\n\r\n//收藏数量\r\nconst Collect = async () => {\r\n  if (!isCollect.value){\r\n    const res = await request.get('/details/collect',{params: { name: videoName}});\r\n    Descriptions.value.collect=res.data.data\r\n    console.log(\"-------\", res.data.data)\r\n    isCollect.value=true\r\n  }else {\r\n    const res = await request.get('/details/collectDelete',{params: { name: videoName}});\r\n    Descriptions.value.collect=res.data.data\r\n    isCollect.value=false\r\n  }\r\n\r\n};\r\n\r\n\r\nonMounted(() => {\r\n  loadVideoData();\r\n  loadNumberOfEpisodes();\r\n  loadDescription();\r\n});\r\n\r\nconst displayedEpisodes = computed(() => {\r\n  const startIndex = (currentPage.value - 1) * episodesPerPage;\r\n  const endIndex = Math.min(startIndex + episodesPerPage, numberOfEpisodes.value);\r\n  return Array.from({ length: endIndex - startIndex }, (_, index) => startIndex + index + 1);\r\n});\r\n\r\nconst totalPages = computed(() => Math.ceil(numberOfEpisodes.value / episodesPerPage));\r\n\r\n\r\nconst loadEpisode = async (episodeNumber) => {\r\n  console.log(\"?????????\", episodeNumber);\r\n  const startIndex = (currentPage.value - 1) * episodesPerPage;\r\n  const actualEpisodeNumber = startIndex + episodeNumber;\r\n  try {\r\n    const res = await request.get(`/videos/${videoName}/episode/${actualEpisodeNumber}`);\r\n    const url = res.data.data;\r\n    if (videoPlayer.value) {\r\n      videoPlayer.value.src = url;\r\n      videoPlayer.value.load();\r\n      videoPlayer.value.play();\r\n    }\r\n  } catch (error) {\r\n    console.error('Error loading episode:', error);\r\n  }\r\n};\r\n\r\nconst setCurrentPage = (page) => {\r\n  currentPage.value = page;\r\n};\r\n\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .container {  }\r\n  </style>\r\n  "],"mappings":";;;EACSA,KAAK,EAAC,WAAW;EAACC,KAAgD,EAAhD;IAAA;IAAA;EAAA;;gEASFC,mBAAA,CAAmC;EAA/BD,KAAoB,EAApB;IAAA;EAAA;AAAoB,GAAC,OAAK;gEAC5BC,mBAAA,CAAiC;EAA9BD,KAAoB,EAApB;IAAA;EAAA;AAAoB,GAAC,OAAK;;;;;;;;uBAVpDE,mBAAA,CAgBM,OAhBNC,UAgBM,GAfJC,YAAA,CAceC,uBAAA;IAhBrBC,OAAA,EAAAC,QAAA,CAGQ,MAEY,CAFZH,YAAA,CAEYI,oBAAA;MALpBF,OAAA,EAAAC,QAAA,CAIW,MAAa,CAAbH,YAAA,CAAaK,MAAA,gB;MAJxBC,CAAA;QAMQN,YAAA,CASeC,uBAAA;MAfvBC,OAAA,EAAAC,QAAA,CAOU,MAAyC,CAAzCH,YAAA,CAAyCO,mBAAA;QAA/BC,KAAK,EAAC;MAAQ;QAPlCN,OAAA,EAAAC,QAAA,CAOmC,MAAK,CAPxCM,gBAAA,CAOmC,OAAK,E;QAPxCH,CAAA;UAQUN,YAAA,CAMeC,uBAAA;QAdzBC,OAAA,EAAAC,QAAA,CASY,MAGU,CAHVH,YAAA,CAGUU,kBAAA;UAHDF,KAAK,EAAC;QAAO;UATlCN,OAAA,EAAAC,QAAA,CAUgB,MAAsD,CAAtDH,YAAA,CAAsDW,kBAAA;YAVtET,OAAA,EAAAC,QAAA,CAUyB,MAAmC,CAAnCS,UAAmC,C;YAV5DN,CAAA;cAWgBN,YAAA,CAAsDW,kBAAA;YAXtET,OAAA,EAAAC,QAAA,CAW2B,MAAiC,CAAjCU,UAAiC,C;YAX5DP,CAAA;;UAAAA,CAAA;YAaYN,YAAA,CAA6Bc,oBAAA;UAbzCZ,OAAA,EAAAC,QAAA,CAauB,MAAM,CAb7BM,gBAAA,CAauB,QAAM,E;UAb7BH,CAAA;;QAAAA,CAAA;;MAAAA,CAAA;;IAAAA,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}