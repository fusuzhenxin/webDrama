{"ast":null,"code":"import Navigation from \"@/views/navigation.vue\";\nimport { ref, onMounted, computed } from 'vue';\nimport request from \"@/utils/request\";\nimport { useRoute } from 'vue-router';\nexport default {\n  __name: 'VideoDetail',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const videoData = ref('');\n    const route = useRoute();\n    const videoName = route.params.name;\n    console.log(\"=====\", videoName);\n    const videoPlayer = ref(null);\n    const numberOfEpisodes = ref(0);\n    const Descriptions = ref(null);\n\n    //第一集url和短剧的信息\n    const loadVideoData = async () => {\n      try {\n        const res = await request.get('/file/Inception', {\n          params: {\n            name: videoName\n          }\n        });\n        // const res = await request.get(`/file/${videoId}`);\n        videoData.value = res.data.data;\n        console.log(\"[[[\", videoData.value);\n      } catch (error) {\n        console.error('Error loading video data:', error);\n      }\n    };\n    const loadDescription = async () => {\n      try {\n        const res = await request.get('/details/finAll', {\n          params: {\n            name: videoName\n          }\n        });\n        Descriptions.value = res.data.data;\n        console.log(\"res.data.data----------\", res.data.data);\n      } catch (error) {\n        console.error('Error loading number of episodes:', error);\n      }\n    };\n\n    //获取这个剧有多少集\n    const loadNumberOfEpisodes = async () => {\n      try {\n        const res = await request.get('/videos/diversity', {\n          params: {\n            name: videoName\n          }\n        });\n        numberOfEpisodes.value = res.data.data;\n      } catch (error) {\n        console.error('Error loading number of episodes:', error);\n      }\n    };\n    const displayedEpisodes = computed(() => {\n      const startIndex = (currentPage.value - 1) * episodesPerPage;\n      const endIndex = Math.min(startIndex + episodesPerPage, numberOfEpisodes.value);\n      return Array.from({\n        length: endIndex - startIndex\n      }, (_, index) => startIndex + index + 1);\n    });\n    const totalPages = computed(() => Math.ceil(numberOfEpisodes.value / episodesPerPage));\n    const loadEpisode = async episodeNumber => {\n      console.log(\"?????????\", episodeNumber);\n      const startIndex = (currentPage.value - 1) * episodesPerPage;\n      const actualEpisodeNumber = startIndex + episodeNumber;\n      try {\n        const res = await request.get(`/videos/${videoName}/episode/${actualEpisodeNumber}`);\n        const url = res.data.data;\n        if (videoPlayer.value) {\n          videoPlayer.value.src = url;\n          videoPlayer.value.load();\n          videoPlayer.value.play();\n        }\n      } catch (error) {\n        console.error('Error loading episode:', error);\n      }\n    };\n    onMounted(() => {\n      loadVideoData();\n      loadDescription();\n      loadNumberOfEpisodes();\n    });\n    const __returned__ = {\n      videoData,\n      route,\n      videoName,\n      videoPlayer,\n      numberOfEpisodes,\n      Descriptions,\n      loadVideoData,\n      loadDescription,\n      loadNumberOfEpisodes,\n      displayedEpisodes,\n      totalPages,\n      loadEpisode,\n      Navigation,\n      ref,\n      onMounted,\n      computed,\n      get request() {\n        return request;\n      },\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["Navigation","ref","onMounted","computed","request","useRoute","videoData","route","videoName","params","name","console","log","videoPlayer","numberOfEpisodes","Descriptions","loadVideoData","res","get","value","data","error","loadDescription","loadNumberOfEpisodes","displayedEpisodes","startIndex","currentPage","episodesPerPage","endIndex","Math","min","Array","from","length","_","index","totalPages","ceil","loadEpisode","episodeNumber","actualEpisodeNumber","url","src","load","play"],"sources":["F:/video/vue/src/views/VideoDetail.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\" style=\"min-height: 100%; padding-bottom: 100px;\">\r\n      <el-container>\r\n        <el-header>\r\n           <navigation/>\r\n        </el-header>\r\n        <el-container>\r\n          <el-aside width=\"1000px\">\r\n            <div class=\"video-wrapper\">\r\n              <div class=\"video-container\">\r\n                <video ref=\"videoPlayer\" controls class=\"custom-video\" >\r\n                  <source :src=\"videoData.url\" type=\"video/mp4\">\r\n                  Your browser does not support the video tag.\r\n                </video>\r\n              </div>\r\n            </div>\r\n          </el-aside>\r\n          <el-container>\r\n            <el-main width=\"382px\">\r\n                <el-text><h1 style=\"color: black\">我思念的她</h1></el-text>\r\n                <el-text><p style=\"color: black\">主演：{{ Descriptions && Descriptions.actors }}</p></el-text>\r\n              <el-button>{{Descriptions && Descriptions.classify}}</el-button>\r\n              <el-button>民国</el-button>\r\n              <p style=\"color: darkgray\">{{Descriptions && Descriptions.description}}</p>\r\n\r\n              <div class=\"like-favorite-container\">\r\n                  <div class=\"like-container\">\r\n                      <button class=\"like-button\" @click=\"Likes\">{{ isLiked ? '取消点赞' : '点赞' }}</button>\r\n                      <span class=\"like-count\">{{Descriptions && Descriptions.quantity}}</span>\r\n              </div>\r\n              <div class=\"favorite-container\">\r\n                  <button class=\"favorite-button\" @click=\"Collect()\">{{ isCollect ? '取消收藏' : '收藏' }}</button>\r\n                  <span class=\"favorite-count\">{{Descriptions && Descriptions.collect}}</span>\r\n              </div>\r\n              </div>\r\n              <div style=\"display: flex; justify-content: space-between;\">\r\n                    <el-text> <h2 style=\"color: black\">选集</h2></el-text>\r\n                      <el-text><h4 style=\"color: #8a8b8d;margin-right: 240px;margin-top: 30px\">共{{numberOfEpisodes}}集</h4></el-text>\r\n              </div>\r\n\r\n            </el-main>\r\n            <el-footer>\r\n              <div class=\"button-bottom-half\">  <!-- 上半部分 -->\r\n                <div class=\"button-inner-container\">\r\n                  <button v-for=\"(episode, index) in displayedEpisodes\" :key=\"index\" @click=\"loadEpisode(index+1)\" class=\"episode-button\">\r\n                    {{ episode }}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </el-footer>\r\n          </el-container>\r\n        </el-container>\r\n      </el-container>\r\n    </div>\r\n  </template>\r\n\r\n  <script setup>\r\nimport Navigation from \"@/views/navigation.vue\";\r\nimport { ref, onMounted,computed } from 'vue';\r\nimport request from \"@/utils/request\";\r\nimport { useRoute } from 'vue-router';\r\n\r\nconst videoData=ref('')\r\nconst route = useRoute();\r\nconst videoName = route.params.name;\r\nconsole.log(\"=====\",videoName);\r\nconst videoPlayer = ref(null);\r\nconst numberOfEpisodes = ref(0);\r\nconst  Descriptions= ref(null)\r\n\r\n //第一集url和短剧的信息\r\n const loadVideoData = async () => {\r\n    try {\r\n      const res = await request.get('/file/Inception',{params: {name: videoName} });\r\n      // const res = await request.get(`/file/${videoId}`);\r\n      videoData.value = res.data.data;\r\n      console.log(\"[[[\",videoData.value)\r\n    } catch (error) {\r\n      console.error('Error loading video data:', error);\r\n    }\r\n  };\r\n  const loadDescription =async () => {\r\n  try {\r\n    const res=await request.get('/details/finAll', {params: {name: videoName} })\r\n    Descriptions.value=res.data.data\r\n    console.log(\"res.data.data----------\",res.data.data)\r\n  }catch (error){\r\n    console.error('Error loading number of episodes:', error);\r\n  }\r\n}\r\n\r\n//获取这个剧有多少集\r\nconst loadNumberOfEpisodes = async () => {\r\n  try {\r\n    const res = await request.get('/videos/diversity', { params: { name: videoName } });\r\n    numberOfEpisodes.value = res.data.data;\r\n  } catch (error) {\r\n    console.error('Error loading number of episodes:', error);\r\n  }\r\n};\r\n\r\nconst displayedEpisodes = computed(() => {\r\n  const startIndex = (currentPage.value - 1) * episodesPerPage;\r\n  const endIndex = Math.min(startIndex + episodesPerPage, numberOfEpisodes.value);\r\n  return Array.from({ length: endIndex - startIndex }, (_, index) => startIndex + index + 1);\r\n});\r\n\r\nconst totalPages = computed(() => Math.ceil(numberOfEpisodes.value / episodesPerPage));\r\n\r\nconst loadEpisode = async (episodeNumber) => {\r\n  console.log(\"?????????\", episodeNumber);\r\n  const startIndex = (currentPage.value - 1) * episodesPerPage;\r\n  const actualEpisodeNumber = startIndex + episodeNumber;\r\n  try {\r\n    const res = await request.get(`/videos/${videoName}/episode/${actualEpisodeNumber}`);\r\n    const url = res.data.data;\r\n    if (videoPlayer.value) {\r\n      videoPlayer.value.src = url;\r\n      videoPlayer.value.load();\r\n      videoPlayer.value.play();\r\n    }\r\n  } catch (error) {\r\n    console.error('Error loading episode:', error);\r\n  }\r\n};\r\n  onMounted(() => {\r\n    loadVideoData();\r\n    loadDescription();\r\n    loadNumberOfEpisodes();\r\n  });\r\n  </script>\r\n\r\n  <style scoped>\r\n.video-wrapper {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border: 1px solid black; /* 添加按钮边框样式 */\r\n}\r\n\r\n.video-container {\r\n  position: relative;\r\n  flex: 1;\r\n}\r\n\r\n.custom-video {\r\n  width: 1000px;\r\n  height: 800px;\r\n  background-color: white;\r\n  background-color: rgba(255, 255, 255, 0.6); /* 白色背景，透明度为 0.5 */\r\n}\r\n.like-favorite-container {\r\n  border: 1px solid darkgray;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 10px;\r\n  margin-top: 20px;\r\n}\r\n\r\n.like-container, .favorite-container {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.like-button, .favorite-button {\r\n  padding: 5px 10px;\r\n  background-color: transparent;\r\n  border: none;\r\n  color: darkgray;\r\n  cursor: pointer;\r\n}\r\n\r\n.like-count, .favorite-count {\r\n  margin-left: 5px;\r\n  color: white;\r\n}\r\n\r\n.like-button:hover, .favorite-button:hover {\r\n  background-color: darkgray;\r\n  color: white;\r\n}\r\n  </style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}